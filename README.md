# BrightendFramework
A unity framework based on SpringBoot backend and Addressable + HybridCLR hot updates.  
Some features may not be very comprehensive, but this is a good start.  

  
# Unity Path Defines and Utility Describe  
Assets  
├─AddressableAssetsData  
│  ...  
│  
├─Editor  
│      BundleUploader.cs	// Open an editor window, upload all bundles located in build path by ONE-CLICK.   
│  
│  
│      DictEditorWindow.cs	// Open an editor window, fill your localization dictionary entry(example, `en #START StartGame`), insert the entry to your MySQL database by ONE-CLICK.   
│  
│  
│      HotPatchExporter.cs	// This can convert your folder with art assets and hotfix scripts to Addressable Bundle by ONE-CLICK. Usage and principles: Right click the folder located in `HotPatch`, select `Export Addressable Bundles`. This will create a addressable group named `{YourFolderName}`, and mark all files within folder except for `Scripts` Addressable(Script shouldn't be packed in bundle), and create a Assembly Defination file located in `{YourFolderName}/Scripts`. After that, it will add `{YourFolderName}` to HCLR's HotUpdateAssemblie settings and compile hotfix DLL using HCLR, and rename exported files `{YourFolderName}.dll.bytes` and `{YourFolderName}.pdb.bytes`, then move them to `{YourFolderName}`. After this, it will build the addressable group. At last you can find all the addressable bundles in `ServerData/{TargetBuild}`, it really solved complex progress for people. In coding, you can access your DLL file easily by path `{YourFolderName}/{YourFolderName}.*.bytes`. And I strongly suggest you to remove and rename your scene to `{YourFolderName}/{YourFolderName}.unity`, by doing this, you can use API `LoadingManager.LoadScene({YourFolderName})` to load dlc scene quickly.   
│  
│  
│      LocalizationContextMenu.cs	// Add `RuntimeStringLocalization` component to your game object. Usage and principles: Right click your TMPro.Text component, and click `Add Runtime Localization System`. This component will add entry {Text.text} to your string database for runtime localization function. Example, type `#START` in your `TMPro.text` component. After starting your game, the text `#START` will be replaced by `StartGame` within your localization string database if you are English language.   
│  
│  
│      PlaceholderTools.cs	// Convert your component attached to game object to a Placeholder. Usage and principles: Right click your attached script component, click `Convert To Placeholder`. The placeholder component will remember your original class name and property values, you can also re-right click the placeholder and click one more time to restore placeholder back to your original component.   
│  
│  
│      PrintPropertiesUtility.cs	// Print all properties of the component you selected.   
│  
├─HotPatch	// Put all your DLCs here  
│  │  
│  └─DLC_TestScene	// Example DLC  
│      │  DLC_TestScene.unity	// Highly suggest you to rename your level to {YourFolderName}.unity. So that you can use `LoadingManager.LoadScene({YourFolderName})` to load dlc scene quickly.   
│      │  DLC_TestScene.dll.bytes	// Auto generated by `HotPatchExporter.cs` with ONE-CLICK.  
│      │  DLC_TestScene.pdb.bytes	// Auto generated by `HotPatchExporter.cs` with ONE-CLICK.  
│      │  
│      └─Scripts	// All assets within this folder won't be addressabled if using `HotPatchExporter`  
│              DLC_TestScene.asmdef		// Auto generated by `HotPatchExporter.cs` with ONE-CLICK.  
│              TestScene_S.cs  
│  
├─HybridCLRGenerate  
│      ...  
│  
├─JsonDotNet  
│      ...  
│  
├─Localization  
│  │  ...  
│  │  
│  └─Flags  
│          cn.png  
│          us.png  
│  
├─ProSheep  
│      Brightend.cs		// Main entry for SpringBoot backend. You can find UserData here, and login logic.   
│      ButtonTest.cs  
│      FreeDownloadManager.cs	// Main entry for download utilities, including GET, POST download method. You can change your {ServerUrl} here.   
│      ...  
│  
├─Scenes  
│  │  TestAddressable.cs  
│  │  TestScene.unity  
│  │  
│  ├─ChapterMenu  
│  │  │  SE_ChapterMenu.unity  
│  │  │  ...  
│  │  │  
│  │  ├─Prefabs  
│  │  │      LevelObject_PRB.prefab  
│  │  │  
│  │  └─Textures  
│  │          ...  
│  │  
│  ├─Loading  
│  │      Placeholder_HCLR.cs  
│  │      LoadingManager.cs		// Main entry for loading utilities. You can load both networked and local scene by LoadingManager.LoadScene(), this will also load the hotfix DLLs within the addressable bundle.  
│  │      SE_Loading.unity  
│  │  
│  ├─Loginmenu  
│  │      SE_LoginMenu.unity  
│  │      ...  
│  │  
│  └─Premainmenu  
│          SE_PreMainmenu.unity  
│          ...  
│  
└─TextMesh Pro  
      OPPOSANS-R SDF.asset  
      OPPOSANS-R.TTF  
      ...  
  
# SpringBoot Path Defines and Utility Describe  
BrightendRoot  
├─ProjectBackend  
│  │  test_post.http	// All the backend APIs here, using IDEA or Rider to open this and test APIs.  
│  │  ...  
│  │  
│  ├─gameassets		// Default download dictionary of API `v1/files/download_gameassets` and `v1/files/upload_gameassets`  
│  │  │  1.png    
│  │  │  ...  
│  │  │  
│  │  └─dlcs		// Default download dictionary of API `v1/files/download_gameassets/dlcs` and `v1/files/upload_gameassets/dlcs/`  
│  │          catalog_1.0.hash    
│  │          ...	// and other bundle files  
│  │  
│  ├─src  
│  │  ├─main  
│  │  │  ├─java  
│  │  │  │  └─com  
│  │  │  │      └─prosheep  
│  │  │  │          └─ProjectBackend  
│  │  │  │              │  ProjectBackendApplication.java	// Application entrance  
│  │  │  │              │  
│  │  │  │              ├─common  
│  │  │  │              │  └─controller  
│  │  │  │              │          IndexController.java  
│  │  │  │              │  
│  │  │  │              └─unityapi  
│  │  │  │                  ├─controller  
│  │  │  │                  │      DictController.java  
│  │  │  │                  │      FileController.java  
│  │  │  │                  │      LevelController.java  
│  │  │  │                  │      TestController.java  
│  │  │  │                  │      UserController.java  
│  │  │  │                  │      UserDataController.java  
│  │  │  │                  │  
│  │  │  │                  ├─entity  
│  │  │  │                  │      Dict.java  
│  │  │  │                  │      Level.java  
│  │  │  │                  │      R.java  
│  │  │  │                  │      User.java  
│  │  │  │                  │      UserData.java  
│  │  │  │                  │  
│  │  │  │                  ├─mapper  
│  │  │  │                  │      DictMapper.java  
│  │  │  │                  │      LevelMapper.java  
│  │  │  │                  │      UserDataMapper.java  
│  │  │  │                  │      UserMapper.java  
│  │  │  │                  │  
│  │  │  │                  └─service  
│  │  │  │                          DictService.java  
│  │  │  │                          FileService.java  
│  │  │  │                          UserDataService.java  
│  │  │  │                          UserService.java  
│  │  │  │  
│  │  │  └─resources  
│  │  │          application.yml  
│  │  │  
│  │  └─test  
│  │      ...  
│  │  
│  ├─target  
│  │     ...  
│  │  
│  └─useruploads	// Default dictionary of API `v1/files/upload` and `v1/files/download_useruploads`  
│          managarmr.png  
│          ...    
│  
└─sql  
    │  
    └─Dump20251209	// MySQL backup files  
            lang_bright_dict_data.sql  
            lang_bright_level_list.sql  
            lang_bright_user.sql  
            lang_bright_user_data.sql  
